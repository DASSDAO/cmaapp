(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dcebda68"],{"073d":function(t,i,a){},"073e":function(t,i,a){"use strict";var o=a("8b80"),e=a.n(o);e.a},"5b85":function(t,i,a){"use strict";a.r(i);var o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"mypage"},[a("TitleBar",{attrs:{titleTx:t.title}}),a("div",{staticClass:"otc-up"},[a("div",{staticClass:"pricetip"},[a("span",{staticStyle:{color:"#44566B"}},[t._v(t._s(t.$t("adprice"))+"：")]),a("div",{staticStyle:{"align-self":"center"}},[a("span",{staticStyle:{color:"#44566B"}},[a("b",[t._v(t._s(t.ethcny))])]),a("span",{staticStyle:{color:"gray"}},[t._v(" | ")]),a("span",{staticStyle:{color:"#44566B"}},[t._v("CNY")])])]),a("div",{staticClass:"tr-btn"},[a("q-btn",{staticClass:"otc-btn",attrs:{flat:"",color:"primary",label:t.$t("myorder")},nativeOn:{click:function(i){return t.myorder(i)}}}),a("div",{staticClass:"porti-line"}),a("q-btn",{staticClass:"otc-btn",attrs:{flat:"",color:"primary",label:t.$t("myads")},nativeOn:{click:function(i){return t.myad(i)}}}),a("div",{staticClass:"porti-line"}),a("q-btn",{staticClass:"otc-btn",attrs:{flat:"",color:"primary",label:t.$t("smitad")},nativeOn:{click:function(i){return t.submitAd(i)}}})],1)]),a("div",{staticClass:"otc-down"},t._l(t.ads,function(i){return a("q-card",{key:i.index,staticClass:"otc-card",nativeOn:{click:function(a){t.cardClick(i)}}},[a("div",{staticClass:"card-item"},[a("span",{staticStyle:{color:"#3587F2","font-size":"22px"}},[t._v(t._s(i.ensname))]),a("span",{staticStyle:{color:"#44566B","font-size":"20px","align-self":"center"}},[t._v(t._s(t.getShowPrice(i.floatrate,i.lowestprice))+" CNY")])]),a("div",{staticClass:"card-item"},[a("span",{staticStyle:{color:"#6f7d8e","font-size":"13px"}},[t._v(t._s(t.$t("monthtrade"))+":"+t._s(""===i.monthtrade?0:i.monthtrade))]),a("span",{staticStyle:{color:"#6f7d8e","font-size":"13px","align-self":"center"}},[t._v(t._s(t.$t("singmin"))+":"+t._s(i.singmin)+" ETH")])]),a("div",{staticClass:"card-item"},[a("div",{staticStyle:{"margin-top":"10px"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:""!==i.alipayno,expression:"item.alipayno!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/alipays.png"}}),a("img",{directives:[{name:"show",rawName:"v-show",value:""!==i.cardno,expression:"item.cardno!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/bankcards.png"}}),a("img",{directives:[{name:"show",rawName:"v-show",value:""!==i.weixincodeUrl,expression:"item.weixincodeUrl!==''"}],staticStyle:{height:"20px","margin-left":"5px"},attrs:{src:"statics/wepay.png"}})]),a("span",{staticStyle:{color:"#6f7d8e","font-size":"13px","align-self":"center"}},[t._v(t._s(t.$t("adamt"))+":"+t._s(i.tradeamount)+" ETH")])])])})),a("CustomInfoDialog",{attrs:{dialogData:t.infodialog}}),a("SetMobileDialog",{attrs:{dialogData:t.setMobileDialogData}})],1)},e=[];o._withStripped=!0;a("c5f6"),a("6b54");var s=a("9bfb"),n=(a("a002"),a("ef5a")),l=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("q-dialog",{on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(i){return a("div",{staticClass:"dialog-btn"},[a("q-btn",{attrs:{flat:"",label:t.$t("cancel")},on:{click:i.cancel}}),a("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.$t("ok")},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(i){t.$set(t.dialogData,"show",i)},expression:"dialogData.show"}},[a("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.title))]),a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticStyle:{display:"flex","margin-top":"15px"}},[a("q-input",{staticStyle:{width:"50%"},attrs:{type:"number",placeholder:t.$t("mobile")},model:{value:t.mobile,callback:function(i){t.mobile=i},expression:"mobile"}}),a("q-btn",{attrs:{rounded:"",label:this.$t("sendsmscode")+t.smsbtnTx,color:"primary"},on:{click:t.sendsmscode}})],1),a("q-input",{attrs:{type:"number",placeholder:t.$t("smscode")},model:{value:t.smscode,callback:function(i){t.smscode=i},expression:"smscode"}})],1)])},c=[];l._withStripped=!0;var r={props:["dialogData"],data:function(){return{mobile:"",smscode:"",smsbtnTx:"",mcount:60}},methods:{smsBtnCountdown:function(){var t=this,i=setInterval(function(){t.smsbtnTx="("+t.mcount+"S)",t.mcount--,-1===t.mcount&&(t.mcount=60,t.smsbtnTx="",clearInterval(i))},1e3)},sendsmscode:function(){var t=this;/^1(3|4|5|7|8)\d{9}$/.test(this.mobile)?60===this.mcount?this.$axios.post(this.global.apiconfig.BmobRestAPIUrl+"requestSmsCode",{mobilePhoneNumber:this.mobile+"",template:"cmat1"},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(i){t.smsBtnCountdown()}):toast(this.$t("latersend")):toast(this.$t("mobilecheckfail"))},onOk:function(){""!==this.smscode?(this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50}),this.smscodecheck(),this.dialogData.show=!1):toast(this.$t("smsnull"))},smscodecheck:function(){var t=this;this.$axios.post(this.global.apiconfig.BmobRestAPIUrl+"verifySmsCode/"+this.smscode,{mobilePhoneNumber:this.mobile+""},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(i){"ok"===i.data.msg&&t.submitinfo2bmob()}).catch(function(i){console.error(i),toast(t.$t("smscodeerror")),t.$q.loading.hide()})},submitinfo2bmob:function(){var t=this;this.$axios.put(this.global.apiconfig.BmobRestAPIUrl+"classes/login/"+this.global.loginfo.objectId,{mobile:this.mobile+""},{headers:this.global.apiconfig.BmobRestAPIHeaders}).then(function(i){t.$q.loading.hide(),200===i.status&&(t.global.loginfo.mobile=t.mobile+"",toast(t.$t("setsuccess")))})},onCancel:function(){},onShow:function(){},onHide:function(){}}},d=r,h=(a("073e"),a("2877")),u=Object(h["a"])(d,l,c,!1,null,"5572f898",null);u.options.__file="SetMobileDialog.vue";var m=u.exports,f={components:{TitleBar:s["a"],CustomInfoDialog:n["a"],SetMobileDialog:m},data:function(){return{title:"SmartOTC",infodialog:{show:!1,vhtml:"",ok:this.$t("ok")},otcDialogData:{show:!1},ethcny:"",ads:this.global.otcadList,setMobileDialogData:{show:!1,title:this.$t("setmobile")}}},mounted:function(){var t=this;this.getETHPrice(),setInterval(function(){t.getETHPrice()},6e4),this.getAdList()},methods:{cardClick:function(t){if(console.log(t),""===this.global.loginfo.mobile||"undefined"===typeof this.global.loginfo.mobile)return toast(this.$t("mobilenotreg")),void(this.setMobileDialogData.show=!0);this.otcDialogData.price=this.getShowPrice(t.floatrate,t.lowestprice),this.otcDialogData.alipayno=t.alipayno,this.otcDialogData.cardno=t.cardno,this.otcDialogData.remarkNumber=Math.random().toString().slice(-6),this.otcDialogData.singmin=t.singmin,this.otcDialogData.seller=t.address,this.otcDialogData.sellermobile=t.mobile,this.otcDialogData.weixin=t.weixincodeUrl,this.otcDialogData.sellerActualName=t.actualname,this.$router.push({path:"/BuyETH",query:{dialogData:this.otcDialogData}})},getShowPrice:function(t,i){var a=this.ethcny*(1+parseFloat(t)/100);return Number(a<i?i:a).toFixed(4)},getAdList:function(){var t=this;this.$axios.get(this.global.apiconfig.BmobRestAPIUrl+"classes/otcad",{headers:{"X-Bmob-Application-Id":this.global.apiconfig.bmobotcappid,"X-Bmob-REST-API-Key":this.global.apiconfig.bmobotcapikey,"Content-Type":"application/json"}}).then(function(i){200===i.status&&(t.ads=t.global.otcadList=i.data.results.reverse())})},myad:function(){},myorder:function(){this.$router.push("/MyOTCOrder")},getETHPrice:function(){var t=this,i="https://api.etherscan.io/api?module=stats&action=ethprice&apikey="+this.global.apiconfig.etherscanAPIKey;this.$axios.get(i).then(function(i){t.ethcny=Number(i.data.result.ethusd*parseFloat(t.global.bmobconfig.usdcny)).toFixed(4)}).catch(function(t){}).then(function(){})},submitAd:function(){var t=this;""!==this.global.ensname?""!==this.global.loginfo.cardno&&"undefined"!==typeof this.global.loginfo.cardno||""!==this.global.loginfo.alipayno&&"undefined"!==typeof this.global.loginfo.alipayno||""!==this.global.loginfo.weixin&&"undefined"!==typeof this.global.loginfo.weixin?this.checkIsHaveAd():this.$q.dialog({message:this.$t("receiptinfo")}).then(function(){t.$router.push({path:"/ADReceiptInfo",query:{p1:""}})}).catch(function(){}):this.$q.dialog({message:this.$t("submitadnoensname")}).then(function(){t.$router.push({path:"/registeens",query:{p1:"otc"}})}).catch(function(){})},checkIsHaveAd:function(){var t=this,i={address:this.global.wallet.ethAddress};this.$axios.get(this.global.apiconfig.BmobRestAPIUrl+"classes/otcad?where="+encodeURI(JSON.stringify(i)),{headers:{"X-Bmob-Application-Id":this.global.apiconfig.bmobotcappid,"X-Bmob-REST-API-Key":this.global.apiconfig.bmobotcapikey,"Content-Type":"application/json"}}).then(function(i){console.log(i),200===i.status&&(0!==i.data.results.length?toast(t.$t("onlycanhave1ad")):t.$router.push("/SubmitAD"))})}}},p=f,g=(a("d34f"),Object(h["a"])(p,o,e,!1,null,"f96142fc",null));g.options.__file="SmartOTC.vue";i["default"]=g.exports},"8b80":function(t,i,a){},"9bfb":function(t,i,a){"use strict";var o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"title-bar"},[a("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(i){return t.goBack(i)}}}),a("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},e=[];o._withStripped=!0;var s={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},n=s,l=(a("a675"),a("2877")),c=Object(l["a"])(n,o,e,!1,null,null,null);c.options.__file="TitleBar.vue";i["a"]=c.exports},a675:function(t,i,a){"use strict";var o=a("ca51"),e=a.n(o);e.a},b410:function(t,i,a){"use strict";var o=a("073d"),e=a.n(o);e.a},bd91:function(t,i,a){},ca51:function(t,i,a){},d34f:function(t,i,a){"use strict";var o=a("bd91"),e=a.n(o);e.a},ef5a:function(t,i,a){"use strict";var o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("q-dialog",{attrs:{ok:t.dialogData.ok},on:{show:t.onShow,hide:t.onHide},model:{value:t.dialogData.show,callback:function(i){t.$set(t.dialogData,"show",i)},expression:"dialogData.show"}},[a("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.msg))]),a("div",{attrs:{slot:"body"},slot:"body"},[a("span",{staticClass:"cid-tx",domProps:{innerHTML:t._s(t.dialogData.vhtml)}})])])},e=[];o._withStripped=!0;a("96cf");var s=a("c973"),n=a.n(s),l={props:["dialogData"],data:function(){return{}},methods:{onOk:function(){this.dialogData.show=!1},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=n()(regeneratorRuntime.mark(function t(i,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(i,a){return t.apply(this,arguments)}}()}},c=l,r=(a("b410"),a("2877")),d=Object(r["a"])(c,o,e,!1,null,"2b2a047c",null);d.options.__file="CustomInfoDialog.vue";i["a"]=d.exports}}]);